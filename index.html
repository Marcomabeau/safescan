<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- 
    Content Security Policy Adjustments:
    - Note the 'nonce-random123' for inline scripts
  -->
  <meta 
    http-equiv="Content-Security-Policy" 
    content="default-src 'self'; script-src 'self' 'nonce-random123' https://www.googletagmanager.com; style-src 'self' 'unsafe-inline';"
  >
  <meta http-equiv="X-Content-Type-Options" content="nosniff" />
  <meta http-equiv="X-Frame-Options" content="DENY" />
  <meta http-equiv="Referrer-Policy" content="strict-origin" />
  <meta 
    http-equiv="Strict-Transport-Security" 
    content="max-age=31536000; includeSubDomains" 
  />
  <meta name="google-adsense-account" content="ca-pub-3896416800491281" />
  <title>Digital Security Center</title>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9BK492VN6Q"></script>
  <script nonce="random123">
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9BK492VN6Q');
  </script>

  <style>
    /* Basic Reset & Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    /* Body Styles */
    body {
      background-color: #000; /* fallback color */
      color: #00f3ff;        
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      min-height: 100vh;
    }
    body.dark-mode {
      background-color: #1c1c1c;
      color: #f0f0f0;
    }

    /* Home Button */
    .home-button {
      position: fixed;
      top: 20px;
      left: 20px;
      background-color: #00b3b3;
      color: #1c1c1c;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      text-decoration: none;
      font-size: 1rem;
      z-index: 999;
      cursor: pointer;
    }
    .home-button:hover {
      background-color: #00ffff;
      transform: scale(1.05);
    }

    /* Header */
    header {
      width: 100%;
      background-color: rgba(51, 51, 51, 0.8);
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    header.dark-mode {
      background-color: rgba(0, 0, 0, 0.8);
    }
    .logo {
      font-size: 1.5em;
      color: #00ffff;
      font-weight: bold;
    }

    /* Main Content */
    main {
      flex: 1;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .content-box {
      background-color: rgba(0, 0, 0, 0.5);
      padding: 20px;
      border-radius: 10px;
      max-width: 600px;
      width: 90%;
      margin: 0 auto;
    }

    h1 {
      margin-bottom: 15px;
    }
    p {
      margin-bottom: 25px;
      color: #ffffff;
    }

    /* Buttons */
    .button-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin: 20px auto;
      max-width: 300px; 
      width: 100%;
    }
    .nav-button,
    #darkModeToggle,
    .extra-button {
      background-color: #00b3b3;
      color: #1c1c1c;
      border: none;
      padding: 15px 30px;
      font-size: 1.2em;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.3s ease;
      text-align: center;
    }
    .nav-button:hover,
    #darkModeToggle:hover,
    .extra-button:hover {
      background-color: #00ffff;
      transform: scale(1.05);
    }
    #darkModeToggle {
      margin-top: 20px;
    }

    /* New Extra Buttons Container */
    .extra-buttons-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 30px;
    }

    /* Footer */
    footer {
      width: 100%;
      background-color: rgba(34, 34, 34, 0.8);
      color: #ccc;
      padding: 30px 20px;
      text-align: center;
      font-size: 0.9em;
      box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.5);
    }
    footer.dark-mode {
      background-color: rgba(20, 20, 20, 0.8);
    }
    footer a {
      color: #00ffff;
      text-decoration: none;
      font-weight: bold;
    }
    footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .nav-button,
      #darkModeToggle,
      .extra-button {
        font-size: 1em;
        padding: 10px 20px;
      }
      footer {
        font-size: 0.8em;
      }
    }
  </style>
</head>
<body>
  <!-- HOME BUTTON -->
  <a href="index.html" class="home-button">HOME</a>

  <!-- Header -->
  <header>
    <div class="logo">Safety Scanner</div>
  </header>

  <!-- Main Content -->
  <main>
    <div class="content-box">
      <h1>Welcome to Safety Scanner</h1>
      <p>Secure your digital presence with our powerful scanning tools.</p>

      <!-- Existing Buttons -->
      <div class="button-container">
        <button class="nav-button" data-url="networkscan.html">Network Scanner</button>
        <button class="nav-button" data-url="filescan.html">File Scan</button>
        <button class="nav-button" data-url="emailscan.html">Email Scanner</button>
        <button class="nav-button" data-url="linkscan.html">Link Scanner</button>
        <button class="nav-button" data-url="cryptoscan.html">Crypto Scanner</button>
      </div>

      <!-- Dark Mode Toggle Button -->
      <button id="darkModeToggle">Toggle Dark Mode</button>

      <!-- New Extra Buttons -->
      <div class="extra-buttons-container">
        <button class="extra-button" id="scanAllBtn">Scan All</button>
        <button class="extra-button" id="stopScanBtn">Stop Scan</button>
        <button class="extra-button" id="viewLogsBtn">View Logs</button>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2024 Digital Safety Scanner. All Rights Reserved.</p>
    <p>
      <a href="#">Privacy Policy</a> | 
      <a href="#">Terms of Service</a> | 
      <a href="#">Contact Us</a>
    </p>
  </footer>

  <!-- Scripts (nonce needed for CSP) -->
  <script nonce="random123">
    // Lazy Load Background
    document.addEventListener('DOMContentLoaded', function() {
      const body = document.querySelector('body');
      const bgImage = 'Dssbg.gif';
      const img = new Image();
      img.src = bgImage;
      img.onload = function() {
        body.style.backgroundImage = `url('${bgImage}')`;
        body.style.backgroundRepeat = 'no-repeat';
        body.style.backgroundPosition = 'center center';
        body.style.backgroundAttachment = 'fixed';
        body.style.backgroundSize = 'cover';
      };
    });

    // Dark Mode Toggle
    const darkToggle = document.getElementById('darkModeToggle');
    darkToggle.addEventListener('click', function() {
      document.body.classList.toggle('dark-mode');
      document.querySelector('header').classList.toggle('dark-mode');
      document.querySelector('footer').classList.toggle('dark-mode');
    });

    // Navigation with fetch check to ensure file exists
    const navButtons = document.querySelectorAll('.nav-button');
    navButtons.forEach(button => {
      button.addEventListener('click', function() {
        const url = button.getAttribute('data-url');
        fetch(url)
          .then(response => {
            if (!response.ok) throw new Error('Page not found');
            window.location.href = url;
          })
          .catch(error => {
            alert(`Error: Unable to navigate to ${url}`);
          });
      });
    });

    // EXTRA BUTTON FUNCTIONS
    const scanAllBtn = document.getElementById('scanAllBtn');
    const stopScanBtn = document.getElementById('stopScanBtn');
    const viewLogsBtn = document.getElementById('viewLogsBtn');

    scanAllBtn.addEventListener('click', () => {
      alert("Initiating scan for all modules...");
      // TODO: Add real logic for scanning all modules
      console.log("Scan All triggered.");
    });

    stopScanBtn.addEventListener('click', () => {
      alert("Stopping the current scan...");
      // TODO: Add logic to stop ongoing scans
      console.log("Stop Scan triggered.");
    });

    viewLogsBtn.addEventListener('click', () => {
      alert("Viewing log files...");
      // TODO: Add logic to display or retrieve logs
      console.log("View Logs triggered.");
    });
  </script>
</body>
</html>
